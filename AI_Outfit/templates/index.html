<body>

    <h1> Welcome to MyBlog </h1>

    <button id="btnLogin" style="display:none;">LINE Login</button>
    <p id="userInfo"></p>

    <hr>

    {% comment %} {{ article_records }} {% endcomment %}

    {% for article in article_records %}

        <p class='post-title'> {{ article.title }} </p>

        <p class='post-content'> {{ article.content }} </p>

        <p class='post-date'> {{ article.pub_date }} </p>

    {% endfor %}

    <hr>

    {{ now }}

    <!-- LIFF SDK -->
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

    <script>
        // 你的 LIFF ID 要改成你自己的
        const liffId = "2007733246-nAexA2b9";

        async function main() {
            await liff.init({ liffId: liffId });

            if (!liff.isLoggedIn()) {
                // 顯示登入按鈕
                document.getElementById('btnLogin').style.display = 'block';
            } else {
                // 已登入，取得用戶資料
                const profile = await liff.getProfile();
                document.getElementById('userInfo').textContent = `你好，${profile.displayName}`;
            }
        }

        main();

        // 登入按鈕事件
        document.getElementById('btnLogin').addEventListener('click', () => {
            liff.login();
        });
    </script>

</body>
